<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conversor de Fotos 3x4</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <div class="has-text-centered" style="padding-top: 20px;">
            <h1 class="title has-text-white is-size-2-desktop is-size-3-mobile">
                üì∏ Conversor de Fotos para Documentos
            </h1>
            <p class="subtitle has-text-white">
                3x4, 5x7 e tamanhos personalizados - Ajuste, remova fundo e imprima
            </p>
        </div>

        <div class="card main-card">
            <div class="card-content">
                <div id="upload-section">
                    <div class="upload-area" id="upload-area">
                        <div class="icon-upload">üìÅ</div>
                        <p class="is-size-5 has-text-weight-semibold">
                            Clique ou arraste uma foto aqui
                        </p>
                        <p class="is-size-7 has-text-grey">
                            Formatos aceitos: JPG, PNG, WEBP
                        </p>
                        <input type="file" id="file-input" accept="image/*" style="display: none;">
                    </div>
                </div>

                <div id="editor-section" style="display: none;">
                    <div class="has-text-centered mb-4">
                        <h2 class="title is-4">Ajuste sua foto</h2>
                        <p class="subtitle is-6">
                            Escolha o tamanho e posicione sua foto
                        </p>
                    </div>

                    <div class="columns is-mobile mb-4">
                        <div class="column">
                            <div class="field">
                                <label class="label">üìê Tamanho da Foto</label>
                                <div class="control">
                                    <div class="select is-fullwidth is-info">
                                        <select id="photo-size-select">
                                            <option value="3x4" selected>3x4 cm (Padr√£o Documentos)</option>
                                            <option value="5x7">5x7 cm (Retrato Maior)</option>
                                            <option value="2x2">2x2 cm (Passaporte/Visto)</option>
                                            <option value="10x15">10x15 cm (Foto Grande)</option>
                                            <option value="custom">‚úèÔ∏è Personalizado</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="custom-size-fields" style="display: none;">
                        <div class="has-text-centered mb-3">
                            <span class="tag is-info is-medium">‚úèÔ∏è Tamanho Personalizado</span>
                        </div>
                        <div class="columns is-mobile">
                            <div class="column">
                                <div class="field">
                                    <label class="label">Largura (cm)</label>
                                    <div class="control">
                                        <input class="input" type="number" id="custom-width" 
                                               value="3" min="1" max="20" step="0.5">
                                    </div>
                                    <p class="help">1 a 20 cm</p>
                                </div>
                            </div>
                            <div class="column">
                                <div class="field">
                                    <label class="label">Altura (cm)</label>
                                    <div class="control">
                                        <input class="input" type="number" id="custom-height" 
                                               value="4" min="1" max="30" step="0.5">
                                    </div>
                                    <p class="help">1 a 30 cm</p>
                                </div>
                            </div>
                        </div>
                        <button class="button is-info is-small is-fullwidth mb-4" id="apply-custom-size">
                            ‚úì Aplicar Tamanho Personalizado
                        </button>
                    </div>

                    <div id="preview-container">
                        <canvas id="crop-canvas"></canvas>
                        <img id="preview-image" alt="Preview">
                        <p class="has-text-centered mt-2 has-text-grey" id="current-size-display">
                            <strong>Tamanho: 3x4 cm</strong>
                        </p>
                    </div>

                    <div class="field">
                        <label class="checkbox">
                            <input type="checkbox" id="remove-bg-toggle">
                            <strong> Remover fundo (deixar branco)</strong>
                        </label>
                        <p class="help">Ative para tentar remover o fundo da foto automaticamente</p>
                        <div id="processing-indicator" style="display: none; margin-top: 10px;">
                            <span class="tag is-info is-light">
                                ‚öôÔ∏è Processando imagem...
                            </span>
                        </div>
                    </div>

                    <div class="field" id="tolerance-field" style="display: none;">
                        <label class="label">Sensibilidade de Remo√ß√£o</label>
                        <input type="range" class="slider is-fullwidth" id="tolerance-slider" 
                               min="20" max="120" value="50" step="5">
                        <p class="help">Ajuste para capturar melhor o fundo. Valores maiores removem mais √°rea.</p>
                    </div>

                    <div class="field">
                        <label class="label">Zoom</label>
                        <input type="range" class="slider is-fullwidth" id="zoom-slider" 
                               min="100" max="300" value="100" step="1">
                    </div>

                    <div class="field">
                        <label class="label">Posi√ß√£o Vertical (%)</label>
                        <input type="range" class="slider is-fullwidth" id="position-slider" 
                               min="0" max="100" value="50" step="1">
                    </div>

                    <div class="buttons is-centered mt-5">
                        <button class="button is-link is-medium" id="confirm-btn">
                            ‚úì Confirmar Foto
                        </button>
                        <button class="button is-light is-medium" id="cancel-btn">
                            ‚úï Cancelar
                        </button>
                    </div>
                </div>

                <div id="result-section" style="display: none;">
                    <div class="notification is-info is-light">
                        <strong>üìê Tamanho:</strong> <span id="result-size-display">3x4 cm</span> | 
                        <strong>üìä Fotos por p√°gina A4:</strong> <span id="photos-per-page-display">30</span>
                    </div>
                    
                    <div class="controls">
                        <div class="columns is-mobile is-multiline">
                            <div class="column is-half-mobile is-one-third-tablet">
                                <div class="field">
                                    <label class="label">Quantidade de Fotos</label>
                                    <div class="control">
                                        <input class="input" type="number" id="photo-count" 
                                               value="6" min="1" max="50">
                                    </div>
                                    <p class="help is-info">M√°x. 30 fotos por p√°gina A4</p>
                                </div>
                            </div>
                            <div class="column is-half-mobile is-one-third-tablet">
                                <div class="field">
                                    <label class="label">&nbsp;</label>
                                    <button class="button is-info is-fullwidth" id="update-grid">
                                        üîÑ Atualizar
                                    </button>
                                </div>
                            </div>
                            <div class="column is-full-mobile is-one-third-tablet">
                                <div class="field">
                                    <label class="label">&nbsp;</label>
                                    <div class="buttons">
                                        <button class="button is-success" id="print-btn">
                                            üñ®Ô∏è Imprimir
                                        </button>
                                        <button class="button is-primary" id="download-btn">
                                            üíæ Baixar
                                        </button>
                                        <button class="button is-light" id="new-photo-btn">
                                            üì∑ Nova Foto
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="photo-grid" id="photo-grid"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="print-page" id="print-container">
        <!-- P√°ginas ser√£o geradas dinamicamente aqui -->
    </div>

    <script src="./script.js"></script>
</body>
</html>